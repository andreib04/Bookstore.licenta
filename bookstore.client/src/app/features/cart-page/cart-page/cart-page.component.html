<div class="d-flex justify-content-between p-4">

  <div *ngIf="isLoading" class="d-flex justify-content-center align-items-center overlay">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>

  <h1 class="fw-bold ms-5">My Cart</h1>
  <button routerLink="/books" class="btn btn-outline-dark rounded-5 me-5"><i class="bi bi-arrow-left"></i> Continue shopping</button>
</div>

<div class="page-container d-flex justify-content-between p-4" style="gap: 20px;">

  <div class="product-display" style="width: 70%;">
    <div class="d-flex flex-row align-items-center p-2 fs-4 fw-bold justify-content-around">
      <div>Product</div>
      <div>Details</div>
      <div style="margin-left: 250px">Quantity</div>
      <div>Price</div>
    </div>


   <!--HERE GOES THE PRODUCTS FROM THE CART -->
    <div class="fs-4 d-flex justify-content-center mt-5" *ngIf="cartItems.length === 0">
      <p>Your cart is empty.</p>
    </div>

    <div *ngFor="let item of cartItems" class="d-flex flex-wrap flex-column">

      <div class="card d-flex flex-row align-items-center p-3 gap-4 justify-content-around mt-2">
        <div class="product-img">
          <img class="object-fit-cover" style="width: 180px; height: 250px;"
               [src]="item.image"
               alt="Image not found">
        </div>

        <div class="product-details">
          <div class="title">
            <h4 class="fw-bold">{{ item.title }}</h4>
          </div>
          <div class="details">
            <div class="text-truncate" style="max-width: 300px;">
              {{ item.description }}
            </div>
          </div>
        </div>

        <div class="product-count">
          <div class="d-flex align-items-center gap-2">
            <button (click)="updateQuantity(item, -1)" id="decrease" class="btn btn-outline-primary">-</button>
            <span id="counterValue" class="fw-bold text-center fs-5">{{ item.quantity }}</span>
            <button (click)="updateQuantity(item, 1)" id="increase" class="btn btn-outline-primary">+</button>
          </div>
        </div>

        <div class="product-price">
          <h4 class="m-0">${{ item.price }}</h4>
        </div>
      </div>

    </div>


  </div>


  <div class="checkout card rounded mt-5 d-flex flex-column justify-content-between p-3" style="width: 15%; height: 300px;">

    <div>
      <div class="d-flex justify-content-around mt-2">
        <span class="text-uppercase">Subtotal:</span>
        <span class="fw-bold fs-5">${{totalPrice}}</span>
      </div>
      <div class="d-flex justify-content-around">
        <span class="text-uppercase">Shipping:</span>
        <span class="fw-bold fs-5">FREE</span>
      </div>
      <div class="d-flex justify-content-around mt-2">
        <span class="text-uppercase fw-bold fs-5">Total:</span>
        <span class="fw-bold fs-5">${{totalPrice}}</span>
      </div>
    </div>

    <div class="checkout-btn">
      <button class="btn btn-primary d-flex justify-content-between fs-5 w-100">
        <span class="ms-2">Checkout</span>
        <span class="me-2">${{totalPrice}}</span>
      </button>
    </div>

  </div>


</div>
